# Сборка и запуск программы
```
git clone https://github.com/borzor/Anti-Reversing_Technique.git
cd Anti-Reversing_Techniques/
mkdir build
cd build/
cmake ..
make
sudo ./untitled
```

## Используемые методы против отладки
### CMAKE FLAGS:
* Флаг ```-s``` заставит компилятор *удалить все таблицы символов(.symtab) и информацию о 
перемещении из исполняемого файла*.
* Флаг ```-fvisibility=hidden``` по умолчанию скрывает все возможные символы
из динамической таблицы символов .dymsym
* Флаг ```-О3``` является вторым по оптимизации(после -Ofast), но при этом более предпочтительным
из-за того, что некоторые оптимизации могут значительно увеличить бинарный файл в размерах
* Флаг ```-funroll-loops``` отменяет *сворачивание* структур циклов
* Флаг ```-static```  предотвращает линковку с динамическими библиотеками

### Техники используемые в коде
* Техника раннего возврата заключается в пуше адреса в стэк и мгновенного возврата. 
Это приведет к тому, что программа вернется на адрес в стэке. Важный момент, для того, чтобы определенный выше флаг ```-O3```
своей оптимизацией не испортил программу, необходимо определить более низкий уровень оптимизации флагом ```-O1```.
* Прыжок на *недопустимый* байт. 3ная то, что GDB дизасемблирует последовательно, можно спрятать необходимую нам инструкцию
путем добавления дополнительных байтов, которые не будут выполнены, но GDB будет рассматривать это
как допустимый код.
* Метод отладки при помощи дочернего процесса  ```fork()``` создает дочерний процесс, который становится трасером родительского и 
автоматически начинает трайсить любые *форки* которые создает программа. Никто не может просто присоединится к основному процессу, после того как за ним
начал трассировку его дочерний процесс.(Только 1 трассировщик может одновременно управлять отслеживаемым объектом!). 
Так же можно добавить флаг PTRACE_O_EXITKILL, который будет отправлять сигнал SIGKILL для всех трейсов, если трейсер был убит. 
* Проверка "TracerPid" поля в /proc/self/status файле. Если значение не ноль, значит к процессу прикреплен дебагер. 
Если это так, подаем сигнал родительскому сигналу и выходим.
* Проверка перед ```main()``` при помощи ```contructor``` в ```attribute``` будет вызвана перед функцией ```main()```, для того,
чтобы исключить случаи, когда GDB запустит основную программу до того как дочерний процесс обнаружит дебагер и убьет процесс. 
